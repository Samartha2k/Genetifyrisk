<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Genetify Risk - Professional Genetic Risk Assessment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <!-- Optimized Chromosome Background -->
  <div class="mesh-gradient">
    <!-- Chromosome 1 (Purple/Blue) -->
    <div class="chromosome chromosome-1">
      <div class="chr-arm chr-arm-p">
        <div class="chr-band band-1"></div>
        <div class="chr-band band-2"></div>
      </div>
      <div class="chr-centromere"></div>
      <div class="chr-arm chr-arm-q">
        <div class="chr-band band-3"></div>
        <div class="chr-band band-4"></div>
      </div>
    </div>

    <!-- Chromosome 2 (Pink/Orange) -->
    <div class="chromosome chromosome-2">
      <div class="chr-arm chr-arm-p">
        <div class="chr-band band-1"></div>
      </div>
      <div class="chr-centromere"></div>
      <div class="chr-arm chr-arm-q">
        <div class="chr-band band-2"></div>
        <div class="chr-band band-3"></div>
      </div>
    </div>
  </div>

  <!-- PDF Export Button - Top Right -->
  <div class="pdf-export-top">
    <button class="export-pdf-btn" onclick="exportToPDF()" id="pdfExportBtn" style="display: none;">
      <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10,19L12,15H9V10H15V15L13,19H10Z"/>
      </svg>
      <span>Download PDF</span>
    </button>
  </div>

  <div class="app-container">
    <!-- Header -->
    <div class="header">
      <div class="logo-container">
        <svg class="logo" viewBox="0 -8 72 72" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
              <stop offset="50%" style="stop-color:#ec4899;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
            </linearGradient>
          </defs>
          <path d="M47.71,24.61a15.61,15.61,0,0,0,2.44.19,11.08,11.08,0,0,0,8-3.11l1.19-1.19a2,2,0,1,0-2.88-2.88l-.29.29L46.09,7.82l.29-.28A2,2,0,0,0,43.5,4.66L42.31,5.85a11,11,0,0,0-3.11,8,16.59,16.59,0,0,0,2.14,8,12.82,12.82,0,0,1,1.62,6,7.73,7.73,0,0,1-1.12,4.14L32,22.16a6.54,6.54,0,0,1,2.1-.88l7.8,7.8a7.12,7.12,0,0,0,.09-1.17,10.69,10.69,0,0,0-.36-2.71l-4.07-4.07a12.88,12.88,0,0,1,2.61.63,18.21,18.21,0,0,1-1.6-4.6A15.61,15.61,0,0,0,36.08,17,10.65,10.65,0,0,0,25,28.08a16.59,16.59,0,0,0,2.14,8,12.82,12.82,0,0,1,1.62,6,7.73,7.73,0,0,1-1.12,4.14l-9.89-9.89a6.59,6.59,0,0,1,2.11-.88l7.79,7.79a6.93,6.93,0,0,0,.09-1.16,10.69,10.69,0,0,0-.36-2.71l-4.06-4.06a12.92,12.92,0,0,1,2.6.62,18.24,18.24,0,0,1-1.61-4.6,15.4,15.4,0,0,0-2.43-.19,11,11,0,0,0-8,3.11L12.66,35.5a2,2,0,0,0,2.88,2.88l.29-.29L25.91,48.17l-.29.29a2,2,0,1,0,2.88,2.88l1.19-1.19a11,11,0,0,0,3.11-8,16.59,16.59,0,0,0-2.14-8,12.82,12.82,0,0,1-1.62-6A7.73,7.73,0,0,1,30.16,24l9.89,9.89a6.54,6.54,0,0,1-2.1.88l-7.8-7.8a7.12,7.12,0,0,0-.09,1.17,10.56,10.56,0,0,0,.36,2.7l4.07,4.08a13.58,13.58,0,0,1-2.61-.63,18.21,18.21,0,0,1,1.6,4.6,15.61,15.61,0,0,0,2.44.19A10.65,10.65,0,0,0,47,27.92a16.59,16.59,0,0,0-2.14-8,12.82,12.82,0,0,1-1.62-6,7.73,7.73,0,0,1,1.12-4.14l9.89,9.89a6.82,6.82,0,0,1-2.11.88l-7.8-7.8a8.31,8.31,0,0,0-.08,1.17,10.69,10.69,0,0,0,.36,2.71l4.06,4.06a12.16,12.16,0,0,1-2.6-.63A18.28,18.28,0,0,1,47.71,24.61Z" />
        </svg>
      </div>
      <h1>Genetify Risk</h1>
      <div class="tagline">Professional Genetic Risk Assessment Platform</div>
    </div>

    <!-- Main Card -->
    <div class="card">
      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-steps">
          <div class="progress-line">
            <div class="progress-line-fill" id="progressFill"></div>
          </div>
          <div class="step active" data-step="1">
            <div class="step-circle">1</div>
            <div class="step-label">Disease</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-circle">2</div>
            <div class="step-label">Personal Info</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-circle">3</div>
            <div class="step-label">Family History</div>
          </div>
          <div class="step" data-step="4">
            <div class="step-circle">4</div>
            <div class="step-label">Lifestyle</div>
          </div>
          <div class="step" data-step="5">
            <div class="step-circle">5</div>
            <div class="step-label">Results</div>
          </div>
        </div>
      </div>

      <!-- Form Content -->
      <div class="form-content">
        <!-- Step 1: Disease Selection -->
        <div class="form-step active" data-step="1">
          <h2 class="step-title">Select Genetic Disorder</h2>
          <p class="step-description">Choose the genetic disorder you want to assess risk for</p>

          <div class="form-group">
            <label>Category</label>
            <select id="diseaseCategory" onchange="filterDiseases()">
              <option value="all">All Diseases</option>
              <option value="autosomal-dominant">Autosomal Dominant</option>
              <option value="autosomal-recessive">Autosomal Recessive</option>
              <option value="x-linked">X-Linked</option>
              <option value="multifactorial">Multifactorial</option>
            </select>
          </div>

          <div class="disease-grid" id="diseaseGrid"></div>
        </div>

        <!-- Step 2: Personal Information -->
        <div class="form-step" data-step="2">
          <h2 class="step-title">Personal Information</h2>
          <p class="step-description">Tell us about yourself</p>

          <div class="form-row">
            <div class="form-group">
              <label>Age <span class="required">*</span></label>
              <input type="number" id="age" min="0" max="120" required>
            </div>
            <div class="form-group">
              <label>Biological Sex <span class="required">*</span></label>
              <select id="sex" required>
                <option value="">Select...</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Ethnicity/Ancestry <span class="required">*</span></label>
            <select id="ethnicity" required>
              <option value="">Select...</option>
              <option value="european">European</option>
              <option value="african">African</option>
              <option value="asian">Asian</option>
              <option value="hispanic">Hispanic/Latino</option>
              <option value="native-american">Native American</option>
              <option value="middle-eastern">Middle Eastern</option>
              <option value="mixed">Mixed</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label>Have you been tested for carrier status? <span class="optional">(Optional)</span></label>
            <select id="carrierStatus">
              <option value="unknown">Unknown/Not Tested</option>
              <option value="carrier">Yes, I am a carrier</option>
              <option value="not-carrier">No, I am not a carrier</option>
              <option value="affected">I am affected by this condition</option>
            </select>
          </div>
        </div>

        <!-- Step 3: Family History -->
        <div class="form-step" data-step="3">
          <h2 class="step-title">Family History</h2>
          <p class="step-description">Information about affected family members</p>

          <div class="form-group">
            <label>Are any family members affected or carriers?</label>
            <select id="hasAffectedFamily" onchange="toggleFamilyMembers()">
              <option value="no">No</option>
              <option value="yes">Yes</option>
            </select>
          </div>

          <div id="familyMembersContainer" style="display: none;">
            <div id="familyMembersList"></div>
            <button type="button" class="add-family-btn" onclick="addFamilyMember()">+ Add Family Member</button>
          </div>
        </div>

        <!-- Step 4: Lifestyle & Health Factors -->
        <div class="form-step" data-step="4">
          <h2 class="step-title">Lifestyle & Health Factors</h2>
          <p class="step-description">These factors help refine risk calculation for multifactorial diseases</p>

          <div class="form-row">
            <div class="form-group">
              <label>BMI (Body Mass Index) <span class="optional">(Optional)</span></label>
              <input type="number" id="bmi" step="0.1" min="10" max="60" placeholder="e.g., 24.5">
            </div>
            <div class="form-group">
              <label>Blood Pressure <span class="optional">(Optional)</span></label>
              <select id="bloodPressure">
                <option value="normal">Normal</option>
                <option value="elevated">Elevated</option>
                <option value="high">High</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Smoking Status</label>
            <select id="smoking">
              <option value="never">Never</option>
              <option value="former">Former Smoker</option>
              <option value="current">Current Smoker</option>
            </select>
          </div>

          <div class="form-group">
            <label>Physical Activity Level</label>
            <select id="activity">
              <option value="sedentary">Sedentary</option>
              <option value="light">Light Activity</option>
              <option value="moderate">Moderate Activity</option>
              <option value="vigorous">Vigorous Activity</option>
            </select>
          </div>

          <div class="form-group">
            <label>Diet Quality</label>
            <select id="diet">
              <option value="poor">Poor</option>
              <option value="average">Average</option>
              <option value="good">Good</option>
              <option value="excellent">Excellent</option>
            </select>
          </div>

          <div class="form-group">
            <label>Stress Level</label>
            <select id="stress">
              <option value="low">Low</option>
              <option value="moderate">Moderate</option>
              <option value="high">High</option>
            </select>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="button-group">
          <button type="button" class="btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">Previous</button>
          <button type="button" class="btn-primary" id="nextBtn" onclick="nextStep()">Next</button>
        </div>
      </div>
    </div>

    <!-- Results Container -->
    <div class="results-container card" id="resultsContainer">
      <div class="results-header">
        <h2>Your Genetic Risk Assessment</h2>
        <div class="risk-score" id="riskScore">---%</div>
        <div class="risk-category" id="riskCategory">---</div>
      </div>

      <div class="results-body">
        <!-- Risk Comparison -->
        <div class="result-section">
          <h3>Population Comparison</h3>
          <div class="comparison-bar">
            <div>
              <strong>Your Risk vs. General Population</strong>
              <div class="bar-container">
                <div class="bar-fill" id="comparisonBar" style="width: 0%"></div>
              </div>
              <div class="bar-label">
                <span>General Population: <span id="populationRisk">---%</span></span>
                <span>Your Risk: <span id="yourRisk">---%</span></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Contributing Factors -->
        <div class="result-section">
          <h3>Contributing Factors</h3>
          <ul class="factor-list" id="factorsList"></ul>
        </div>

        <!-- Detailed Information -->
        <div class="result-section">
          <h3>Understanding Your Results</h3>
          <div class="info-card">
            <h4>What This Means</h4>
            <p id="riskExplanation"></p>
          </div>
          <div class="info-card">
            <h4>Confidence Interval</h4>
            <p id="confidenceInterval"></p>
          </div>
        </div>

        <!-- Recommendations -->
        <div class="result-section">
          <h3>Personalized Recommendations</h3>
          <div class="recommendations">
            <ul id="recommendationsList"></ul>
          </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
          <h4>⚠️ Important Medical Disclaimer</h4>
          <p>
            This genetic risk assessment is for educational and informational purposes only.
            It is NOT a substitute for professional medical advice, diagnosis, or treatment.
            Always consult with a qualified healthcare provider or genetic counselor before making
            any decisions regarding your health. The calculations are based on statistical models
            and may not account for all individual factors. Actual risk may vary significantly
            based on additional genetic, environmental, and lifestyle factors not captured in this assessment.
          </p>
        </div>

        <div class="action-buttons">
          <button class="btn-primary restart-btn" onclick="restartAssessment()">Start New Assessment</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // Show PDF button when results are displayed
    document.addEventListener('DOMContentLoaded', function() {
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.target.classList.contains('active')) {
            document.getElementById('pdfExportBtn').style.display = 'inline-flex';
          }
        });
      });

      const resultsContainer = document.getElementById('resultsContainer');
      if (resultsContainer) {
        observer.observe(resultsContainer, { attributes: true, attributeFilter: ['class'] });
      }
    });
  </script>
</body>
</html>
